<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ê²½ì°° ì–‘ì„± v0.29</title>
<style>
  :root{
    --bg:#0f172a; --panel:#0b1224; --card:#111827; --text:#e5e7eb;
    --accent:#60a5fa; --good:#34d399; --warn:#f59e0b; --danger:#ef4444;
    --gap:12px; --r:14px;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;background:linear-gradient(135deg,#0b1022,#0b1e35 60%,#0b1022);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
  .wrap{max-width:1100px;margin:0 auto;padding:16px;display:grid;gap:var(--gap);grid-template-columns: 1fr minmax(0,1.2fr) 1fr}
  header{grid-column:1 / -1;background:var(--panel);border:1px solid #1f2b47;border-radius:var(--r);padding:12px 14px;display:flex;justify-content:space-between;align-items:center}
  .btn{border:1px solid #2b364f;background:#10192b;color:#dbeafe;padding:10px 12px;border-radius:10px;cursor:pointer;text-decoration:none;user-select:none}
  .btn[disabled]{opacity:.5;cursor:not-allowed}
  .btn.good{background:#0f2e2a;border-color:#24564c}
  .btn.warn{background:#2a240f;border-color:#5d4b15}
  .btn.dang{background:#2a0f12;border-color:#5d1521}
  .btn.block{display:block;width:100%}
  .card{background:var(--card);border:1px solid #2b364f;border-radius:var(--r);padding:12px}
  .col{display:flex;flex-direction:column;gap:var(--gap)}
  .title{margin:0 0 8px 0;font-size:18px}
  .row{display:flex;align-items:center;gap:8px;flex-wrap:wrap}
  .stack{display:flex;flex-direction:column;gap:8px}
  .tag{padding:2px 8px;border-radius:999px;border:1px solid #2b364f;background:#0d1426;font-size:12px}
  .hpbar{height:10px;background:#0b1224;border:1px solid #1e293b;border-radius:999px;overflow:hidden}
  .hpbar>span{display:block;height:100%;background:linear-gradient(90deg,#22d3ee,#10b981);width:100%}
  .log{max-height:240px;overflow:auto;font-size:13px;line-height:1.5;background:#0c1326;border:1px dashed #253352;border-radius:10px;padding:10px}
  .hr{height:1px;background:#22304e;margin:8px 0}
  /* Tabs (Right column) */
  .tabs{display:flex;gap:6px;margin-bottom:8px}
  .tab{flex:1;text-align:center;padding:8px;border:1px solid #2b364f;border-radius:8px;background:#0e162b;cursor:pointer;font-size:14px}
  .tab.active{background:#162342}
  .pane{display:none}
  .pane.show{display:block}
  /* Dice animation */
  .diceWrap{display:flex;gap:8px;align-items:center}
  .die{width:42px;height:42px;border-radius:8px;background:#0b1224;border:1px solid #1f2b47;display:grid;place-items:center;font-weight:700}
  .die.roll{animation:roll .3s linear infinite}
  @keyframes roll{
    0%{transform:rotate(0) scale(1)}
    50%{transform:rotate(180deg) scale(1.05)}
    100%{transform:rotate(360deg) scale(1)}
  }
  .toast{position:fixed;left:50%;transform:translateX(-50%);bottom:18px;background:#0b1224;border:1px solid #1f2b47;color:#dbeafe;padding:10px 14px;border-radius:10px;opacity:0;pointer-events:none;transition:opacity .2s,transform .2s}
  .toast.show{opacity:1;transform:translateX(-50%) translateY(-3px)}
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="row">
        <span class="tag">ê²½ì°° ì–‘ì„± â€” ì „íˆ¬ ëª¨ë“œ</span>
        <span style="opacity:.8">v0.29</span>
      </div>
      <div class="row">
        <a class="btn" href="./index.html">â¬…ï¸ ì¸ë±ìŠ¤</a>
        <button class="btn warn" id="btnQuit">ì˜ì›ë©´ì§</button>
      </div>
    </header>

    <!-- LEFT: ì‹ ì›/ìƒíƒœ -->
    <section class="col">
      <div class="card">
        <h3 class="title">ì‹ ì› ì„ íƒ</h3>
        <div class="stack">
          <div class="row">
            <label class="tag"><input type="radio" name="org" value="ê²½ì°°"> ê²½ì°°</label>
            <label class="tag"><input type="radio" name="org" value="í•´ì–‘ê²½ì°°"> í•´ì–‘ê²½ì°°</label>
          </div>
          <div class="row">
            <label class="tag"><input type="radio" name="sex" value="ë‚¨ì"> ë‚¨ì</label>
            <label class="tag"><input type="radio" name="sex" value="ì—¬ì"> ì—¬ì</label>
          </div>
          <div class="row">
            <label class="tag"><input type="radio" name="rank0" value="ì˜ê²½"> ì˜ê²½</label>
            <label class="tag"><input type="radio" name="rank0" value="ìˆœê²½"> ìˆœê²½</label>
            <label class="tag"><input type="radio" name="rank0" value="ê²½ìœ„"> ê²½ìœ„</label>
          </div>
          <input id="nameInput" class="btn block" placeholder="ì´ë¦„(ì„ íƒ)" />
          <button class="btn block" id="btnStart">ì‹œì‘</button>
        </div>
      </div>

      <div class="card" id="statusCard">
        <h3 class="title">ìƒíƒœ</h3>
        <div class="stack">
          <div class="row">
            <span id="rankTxt" class="tag">â€”</span>
            <span id="orgTxt" class="tag">â€”</span>
            <span id="sexTxt" class="tag">â€”</span>
            <span id="yearTxt" class="tag">ì—°ì°¨ 0</span>
            <span id="cashTxt" class="tag">ğŸ’° 0</span>
            <span id="kitTxt" class="tag">ğŸ§° 0</span>
          </div>
          <div class="row" style="justify-content:space-between">
            <div>â¤ï¸ ì²´ë ¥ <span id="hpLabel">50/50</span></div>
            <div id="weaponLabel" style="opacity:.8">ë¬´ê¸°: ì—†ìŒ</div>
          </div>
          <div class="hpbar"><span id="hpBar"></span></div>
        </div>
      </div>
    </section>

    <!-- CENTER: ì „íˆ¬(ë©”ì¸) -->
    <section class="col">
      <div class="card" id="battleCard">
        <h3 class="title">âš”ï¸ ì „íˆ¬</h3>
        <div class="row">
          <span id="enemyName" class="tag">â€”</span>
          <span class="tag">HP <span id="enemyHP">â€”</span></span>
        </div>
        <div class="hr"></div>

        <div class="stack">
          <div class="diceWrap">
            <div class="die" id="d1">â€“</div>
            <div class="die" id="d2">â€“</div>
            <span>vs</span>
            <div class="die" id="e1">â€“</div>
            <div class="die" id="e2">â€“</div>
          </div>

          <div class="row" id="lastRow" style="opacity:.9;font-size:13px">
            <span id="lastMine">ë‚˜: â€”</span>
            <span id="lastEnemy">ì : â€”</span>
            <span id="lastResult">ê²°ê³¼: â€”</span>
          </div>

          <div class="row" style="gap:8px">
            <button class="btn" id="btnRoll">ğŸ² êµ´ë¦¬ê¸°</button>
            <button class="btn" id="btnBaton">ğŸª„ ì‚¼ë‹¨ë´‰(1)</button>
            <button class="btn" id="btnMedUse">ğŸ©¹ êµ¬ê¸‰(í„´ ì†Œëª¨, +30)</button>
          </div>
        </div>
      </div>

      <div class="card" id="endingCard" style="display:none">
        <h3 class="title">## ì—”ë”©</h3>
        <div id="endingText" class="stack"></div>
        <div class="hr"></div>
        <button class="btn block" id="btnReset">ì‹ ì› ì„ íƒìœ¼ë¡œ</button>
      </div>
    </section>

    <!-- RIGHT: íƒ­(í•„ìš”ì‹œì—ë§Œ í‘œì‹œ) -->
    <section class="col">
      <div class="card">
        <div class="tabs">
          <div class="tab" data-pane="pane-battle">ì „íˆ¬</div>
          <div class="tab" data-pane="pane-after">ì• í”„í„°</div>
          <div class="tab" data-pane="pane-shop">ìƒì </div>
          <div class="tab" data-pane="pane-log">ë¡œê·¸</div>
        </div>

        <div id="pane-battle" class="pane show">
          <p class="title" style="font-size:16px;margin-bottom:4px">ì „íˆ¬ ë„ì›€ë§</p>
          <p style="opacity:.8;font-size:13px">2D6 ë™ì‹œ ë¹„êµ: ë” í° ìª½ì´ <b>(ì°¨ì´)</b>ë§Œí¼ í”¼í•´. ë™ë¥ ì€ í”¼í•´ ì—†ìŒ.</p>
        </div>

        <div id="pane-after" class="pane">
          <h3 class="title">ì• í”„í„°</h3>
          <div class="row" style="gap:8px;flex-wrap:wrap">
            <button class="btn" id="btnAfterOpen">âœ… ì œì•• ì²˜ë¦¬</button>
            <button class="btn" id="btnWash">ğŸ§¼ ì”»ê³  ì¶œê·¼(HP+10, ë‹¤ìŒ ì‚¬ê±´)</button>
            <button class="btn" id="btnMedUse2">ğŸ©¹ êµ¬ê¸‰ ì‚¬ìš©(HP+30)</button>
            <button class="btn" id="btnPromo">ğŸ–ï¸ ìŠ¹ì§„ ë„ì „</button>
          </div>
          <p class="hr"></p>
          <p style="opacity:.8;font-size:13px">ì œì•• ì²˜ë¦¬ ì‹œ: ì—°ì°¨ +0.33, ğŸ’°+3</p>
        </div>

        <div id="pane-shop" class="pane">
          <h3 class="title">ìƒì (ì˜êµ¬)</h3>
          <div class="row" style="gap:8px;flex-wrap:wrap">
            <button class="btn" data-weapon="22LR" data-cost="10">22lr (10)</button>
            <button class="btn" data-weapon="9MM" data-cost="20">9mm (20)</button>
            <button class="btn" data-weapon="SHOTGUN" data-cost="35">ì—½ì´ (35)</button>
            <button class="btn" data-weapon="TAZER" data-cost="50">í…Œì´ì € (50)</button>
          </div>
        </div>

        <div id="pane-log" class="pane">
          <h3 class="title">ì´ë ¥ & ë¡œê·¸</h3>
          <div class="log" id="logBox"></div>
        </div>
      </div>
    </section>
  </div>

  <div class="toast" id="toast">ì•Œë¦¼</div>

<script>
(function(){
  // ====== ìƒíƒœ ======
  const STATE = {
    started:false, ended:false, afterOpen:false, locking:false,
    name:"", org:"", sex:"", rank:"â€”", year:0, cash:0, kit:0,
    hp:50, hpMax:50, weapon:null,
    enemy:null, logs:[]
  };
  const RANKS = ["ì˜ê²½","ìˆœê²½","ê²½ì¥","ê²½ì‚¬","ê²½ìœ„","ê²½ê°","ê²½ì •","ì¹˜ì•ˆì´ê°"];
  const PROMO_REQ = {"ì˜ê²½":6,"ìˆœê²½":7,"ê²½ì¥":8,"ê²½ì‚¬":9,"ê²½ìœ„":10,"ê²½ê°":10,"ê²½ì •":11};

  // ====== ë„êµ¬ ======
  const $ = s=>document.querySelector(s);
  const $$ = s=>Array.from(document.querySelectorAll(s));
  const clamp=(n,a,b)=>Math.max(a,Math.min(b,n));
  const r=(a,b)=>Math.floor(Math.random()*(b-a+1))+a;
  const log=t=>{STATE.logs.unshift("â€¢ "+t); $("#logBox").innerHTML=STATE.logs.join("<br>");};
  const toast=t=>{const el=$("#toast"); el.textContent=t; el.classList.add("show"); setTimeout(()=>el.classList.remove("show"),1400);};
  const setTab=name=>{
    $$(".tab").forEach(t=>t.classList.toggle("active", t.dataset.pane===name));
    $$(".pane").forEach(p=>p.classList.toggle("show", p.id===name));
  };
  const hpUI=()=>{ $("#hpLabel").textContent=`${STATE.hp}/${STATE.hpMax}`; $("#hpBar").style.width=`${(STATE.hp/STATE.hpMax)*100}%`; };

  // ====== ì´ˆê¸°í™” ======
  const resetEnemy=()=>{ STATE.enemy = { name: ["ë¶ˆëŸ‰ë°°","í­ì£¼ì","ì ˆë„ë²”","ë‚œë™ì","í•´ìƒí†µí–‰ìœ„ë°˜ì"][r(0,4)], hp: r(18,28) }; };
  const resetGame=()=>{
    Object.assign(STATE,{started:false,ended:false,afterOpen:false,locking:false,name:"",org:"",sex:"",rank:"â€”",year:0,cash:0,kit:0,hp:50,hpMax:50,weapon:null,logs:[]});
    resetEnemy(); renderAll();
  };

  // ====== ë Œë” ======
  const renderAll=()=>{
    $("#rankTxt").textContent = STATE.rank;
    $("#orgTxt").textContent = STATE.org || "â€”";
    $("#sexTxt").textContent = STATE.sex || "â€”";
    $("#yearTxt").textContent = `ì—°ì°¨ ${STATE.year}`;
    $("#cashTxt").textContent = `ğŸ’° ${STATE.cash}`;
    $("#kitTxt").textContent = `ğŸ§° ${STATE.kit}`;
    $("#weaponLabel").textContent = `ë¬´ê¸°: ${STATE.weapon??"ì—†ìŒ"}`;
    hpUI();

    $("#enemyName").textContent = STATE.enemy?.name ?? "â€”";
    $("#enemyHP").textContent = STATE.enemy? STATE.enemy.hp : "â€”";

    // ì—”ë”© ì¹´ë“œ í† ê¸€
    $("#battleCard").style.display = STATE.ended ? "none" : "block";
    $("#endingCard").style.display = STATE.ended ? "block" : "none";

    // íƒ­ ìë™ ì „í™˜
    if(!STATE.started){ setTab("pane-battle"); }
    else if(STATE.afterOpen){ setTab("pane-after"); }
    else{ setTab("pane-battle"); }

    // ë²„íŠ¼ í™œì„±
    ["#btnRoll","#btnBaton","#btnMedUse"].forEach(id=>{
      $(id).disabled = !(STATE.started && !STATE.afterOpen && !STATE.ended) || STATE.locking;
    });
    $("#btnQuit").disabled = !STATE.started || STATE.ended;
  };

  // ====== ì‹œì‘ ======
  $("#btnStart").addEventListener("click", ()=>{
    const pick = (name)=> {
      const list = $$(`input[name=${name}]`);
      const sel = list.find(x=>x.checked)?.value;
      return sel || list[r(0,list.length-1)].value;
    };
    STATE.org = pick("org"); STATE.sex = pick("sex"); STATE.rank = pick("rank0");
    STATE.name = $("#nameInput").value.trim() || ["í™ê¸¸ë™","ê¹€ë¯¼ì¬","ì •ì„¸ë¼","ë°•í•˜ëŠ˜","ì´ë‹´"][r(0,4)];
    STATE.started=true; STATE.ended=false; STATE.afterOpen=false; STATE.year=0; STATE.cash=0; STATE.kit=0; STATE.hp=50; STATE.hpMax=50; STATE.weapon=null;
    resetEnemy();
    log(`ì‹œì‘: ${STATE.org} ${STATE.rank} ${STATE.name} (${STATE.sex})`);
    toast("ê²Œì„ ì‹œì‘");
    renderAll();
  });

  $("#btnQuit").addEventListener("click", ()=>{
    if(!STATE.started || STATE.ended) return;
    endWith("ì˜ì›ë©´ì§","ì˜ì›ë©´ì§ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
  });

  $("#btnReset").addEventListener("click", resetGame);

  // ====== ì „íˆ¬: v0.21 ê°ì„±(ë™ì‹œ 2D6 ë¹„êµ) + ì£¼ì‚¬ìœ„ ì• ë‹ˆë©”ì´ì…˜ ======
  const playDice = async (mineDiceEls, enemyDiceEls, ms=300)=>{
    STATE.locking=true; renderAll();
    const t0 = performance.now();
    mineDiceEls.concat(enemyDiceEls).forEach(el=>el.classList.add("roll"));
    // ë¡¤ë§ ì¤‘ ìˆ«ì ë¹ ë¥´ê²Œ ê°±ì‹ 
    let raf; const tick = (now)=>{
      if(now - t0 < ms){
        mineDiceEls.forEach(el=>el.textContent = r(1,6));
        enemyDiceEls.forEach(el=>el.textContent = r(1,6));
        raf = requestAnimationFrame(tick);
      }
    };
    raf = requestAnimationFrame(tick);
    await new Promise(res=>setTimeout(res,ms));
    cancelAnimationFrame(raf);
    mineDiceEls.concat(enemyDiceEls).forEach(el=>el.classList.remove("roll"));
    // ê²°ê³¼ í™•ì •
    const m1=r(1,6), m2=r(1,6), e1=r(1,6), e2=r(1,6);
    mineDiceEls[0].textContent=m1; mineDiceEls[1].textContent=m2;
    enemyDiceEls[0].textContent=e1; enemyDiceEls[1].textContent=e2;
    return { my: m1+m2, en: e1+e2 };
  };

  const applyDamageCompare = (sumMy,sumEn)=>{
    $("#lastMine").textContent = `ë‚˜: ${sumMy}`;
    $("#lastEnemy").textContent = `ì : ${sumEn}`;
    if(sumMy===sumEn){
      $("#lastResult").textContent = `ê²°ê³¼: ë™ë¥ (í”¼í•´ ì—†ìŒ)`;
      return;
    }
    const diff = Math.abs(sumMy - sumEn);
    if(sumMy>sumEn){
      STATE.enemy.hp = clamp(STATE.enemy.hp - diff, 0, 999);
      $("#lastResult").textContent = `ê²°ê³¼: ë‚´ê°€ ${diff} í”¼í•´`;
      if(STATE.enemy.hp<=0){ STATE.afterOpen=true; log(`ì œì•• ì™„ë£Œ: ${STATE.enemy.name}`); }
    }else{
      STATE.hp = clamp(STATE.hp - diff, 0, STATE.hpMax);
      $("#lastResult").textContent = `ê²°ê³¼: ë‚´ê°€ ${diff} í”¼í•´ë¥¼ ë°›ìŒ`;
      if(STATE.hp<=0){ endWith("ìˆœì§","ì²´ë ¥ì´ 0ì´ ë˜ì–´ ì „íˆ¬ ë¶ˆëŠ¥."); }
    }
  };

  const d1=$("#d1"), d2=$("#d2"), e1=$("#e1"), e2=$("#e2");

  $("#btnRoll").addEventListener("click", async ()=>{
    if(!(STATE.started && !STATE.afterOpen && !STATE.ended) || STATE.locking) return;
    const {my,en} = await playDice([d1,d2],[e1,e2],300);
    applyDamageCompare(my,en);
    renderAll();
    STATE.locking=false; renderAll();
  });

  $("#btnBaton").addEventListener("click", ()=>{
    if(!(STATE.started && !STATE.afterOpen && !STATE.ended) || STATE.locking) return;
    STATE.enemy.hp = clamp(STATE.enemy.hp - 1, 0, 999);
    $("#lastMine").textContent = `ë‚˜: ì‚¼ë‹¨ë´‰(1)`;
    $("#lastEnemy").textContent = `ì : ëŒ€ê¸°`;
    $("#lastResult").textContent = `ê²°ê³¼: ì  HP -1`;
    if(STATE.enemy.hp<=0){ STATE.afterOpen=true; log(`ì œì•• ì™„ë£Œ: ${STATE.enemy.name}`); }
    renderAll();
  });

  $("#btnMedUse").addEventListener("click", ()=>{
    if(!(STATE.started && !STATE.afterOpen && !STATE.ended)) return;
    if(STATE.kit<=0){ toast("êµ¬ê¸‰í•¨ ì—†ìŒ"); return; }
    STATE.kit--; STATE.hp = clamp(STATE.hp+30,0,STATE.hpMax);
    $("#lastMine").textContent = `ë‚˜: êµ¬ê¸‰(HP +30)`;
    $("#lastEnemy").textContent = `ì : ê¸°íšŒ ë°œìƒ(ë°˜ê²© ì—†ìŒ)`; // v0.21 ê°ì„±: ë‚´ í„´ ì†Œë¹„, ì  ì¶”ê°€ê³µê²© ì—†ìŒ
    $("#lastResult").textContent = `ê²°ê³¼: íšŒë³µ`;
    renderAll();
  });

  // ====== ì• í”„í„° ======
  $("#btnAfterOpen").addEventListener("click", ()=>{
    if(!STATE.started || STATE.ended) return;
    if(!STATE.afterOpen){ toast("ì œì•• ì™„ë£Œ ìƒíƒœì—ì„œ ì²˜ë¦¬í•©ë‹ˆë‹¤."); return; }
    STATE.year = +(STATE.year + 0.33).toFixed(2);
    STATE.cash += 3;
    log(`ì• í”„í„° ì²˜ë¦¬: ì—°ì°¨ +0.33, ğŸ’°+3`);
    renderAll();
  });

  $("#btnWash").addEventListener("click", ()=>{
    if(!STATE.afterOpen) { toast("ì œì•• ì²˜ë¦¬ í›„ ì§„í–‰"); return; }
    STATE.hp = clamp(STATE.hp+10,0,STATE.hpMax);
    resetEnemy(); STATE.afterOpen=false;
    log("ì”»ê³  ì¶œê·¼: HP +10, ë‹¤ìŒ ì‚¬ê±´");
    renderAll();
  });

  $("#btnMedUse2").addEventListener("click", ()=>{
    if(!STATE.afterOpen){ toast("ì œì•• ì²˜ë¦¬ í›„ ê°€ëŠ¥"); return; }
    if(STATE.kit<=0){ toast("êµ¬ê¸‰í•¨ ì—†ìŒ"); return; }
    STATE.kit--; STATE.hp = clamp(STATE.hp+30,0,STATE.hpMax);
    toast("HP +30");
    renderAll();
  });

  // ìŠ¹ì§„
  $("#btnPromo").addEventListener("click", ()=>{
    if(!STATE.afterOpen){ toast("ì œì•• ì²˜ë¦¬ í›„ ë„ì „"); return; }
    const need = PROMO_REQ[STATE.rank] ?? 10;
    const d = r(1,6)+r(1,6);
    if(d>=need){
      const idx = Math.min(RANKS.indexOf(STATE.rank)+1,RANKS.length-1);
      const from = STATE.rank, to = RANKS[idx]; STATE.rank = to;
      log(`ìŠ¹ì§„: ${from} â†’ ${to} (ì£¼ì‚¬ìœ„ ${d} / ìš”êµ¬ ${need}+)`);
      toast(`ìŠ¹ì§„: ${to}`);
    }else{
      log(`ìŠ¹ì§„ ì‹¤íŒ¨ (ì£¼ì‚¬ìœ„ ${d} / ìš”êµ¬ ${need}+)`);
      toast("ìŠ¹ì§„ ì‹¤íŒ¨");
    }
    renderAll();
  });

  // ìƒì 
  $("#pane-shop").addEventListener("click", (e)=>{
    const btn = e.target.closest("button[data-weapon]");
    if(!btn) return;
    const w = btn.dataset.weapon, cost = +btn.dataset.cost;
    if(STATE.cash < cost){ toast("ìê¸ˆ ë¶€ì¡±"); return; }
    STATE.cash -= cost; STATE.weapon = w;
    log(`ë¬´ê¸° êµ¬ë§¤: ${w} (-${cost})`);
    $("#weaponLabel").textContent = `ë¬´ê¸°: ${w}`;
    renderAll();
  });

  // ì—”ë”©
  const endWith = (type,text)=>{
    STATE.ended=true;
    $("#endingText").innerHTML = `<div class="stack"><div class="title">${type}</div><div>${text}</div></div>`;
    log(`ì—”ë”©: ${type}`);
    renderAll();
  };

  // íƒ­ í´ë¦­
  $$(".tab").forEach(t=>t.addEventListener("click", ()=>{
    const name=t.dataset.pane;
    // ì „íˆ¬ ì¤‘ì—” ì „íˆ¬ íƒ­ë§Œ í—ˆìš©, ì œì•• í›„ì—” ì• í”„í„°/ìƒì /ë¡œê·¸ í—ˆìš©
    if(STATE.started && !STATE.afterOpen && !STATE.ended && name!=="pane-battle"){ toast("ì „íˆ¬ ì¤‘"); return; }
    if(STATE.afterOpen && name==="pane-battle"){ toast("ì œì•• ì²˜ë¦¬ í›„ ì „íˆ¬ ë³µê·€"); return; }
    setTab(name);
  }));

  // ì‹œì‘ ì„¸íŒ…
  resetEnemy(); renderAll();
})();
</script>
</body>
</html>
